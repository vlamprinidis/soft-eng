(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('npn-slider', ['exports', '@angular/core', '@angular/common'], factory) :
    (factory((global['npn-slider'] = {}),global.ng.core,global.ng.common));
}(this, (function (exports,core,common) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Utilities = (function () {
        function Utilities() {
        }
        /**
         * @param {?} arr
         * @return {?}
         */
        Utilities.prototype.isNumberArray = /**
         * @param {?} arr
         * @return {?}
         */
            function (arr) {
                return (arr && arr.length && arr.filter(function (value) { return !isNaN(value); }).length === arr.length) ? true : false;
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        Utilities.prototype.isNullOrEmpty = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                return obj === undefined || obj === null || obj === '';
            };
        /**
         * @param {?} obj
         * @param {...?} allowedValues
         * @return {?}
         */
        Utilities.prototype.toBoolean = /**
         * @param {?} obj
         * @param {...?} allowedValues
         * @return {?}
         */
            function (obj) {
                var allowedValues = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    allowedValues[_i - 1] = arguments[_i];
                }
                return (obj === '' || obj === 'true' || allowedValues.indexOf(obj) !== -1) ? true : false;
            };
        /**
         * @param {?} n
         * @param {?} step
         * @return {?}
         */
        Utilities.prototype.findNextValidStepValue = /**
         * @param {?} n
         * @param {?} step
         * @return {?}
         */
            function (n, step) {
                var /** @type {?} */ divisorsSet1 = [];
                var /** @type {?} */ divisorsSet2 = [];
                var /** @type {?} */ sqrtNum = Math.sqrt(n);
                var /** @type {?} */ newStep = -1;
                for (var /** @type {?} */ i = 0; i < sqrtNum; i++) {
                    if (n % i === 0) {
                        if ((n / i) === i) {
                            divisorsSet1.push(i);
                        }
                        else {
                            divisorsSet1.push(i);
                            divisorsSet2.push(n / i);
                        }
                    }
                }
                // Picking newStep by checking large set of divisors first
                for (var /** @type {?} */ i = 0; i < divisorsSet2.length; i++) {
                    if (step > divisorsSet2[i]) {
                        newStep = divisorsSet2[i];
                        break;
                    }
                }
                if (newStep === -1) {
                    // checking set of small divisors if newStep didn't find out till.
                    for (var /** @type {?} */ i = divisorsSet1.length - 1; i >= 0; i--) {
                        if (step > divisorsSet1[i]) {
                            newStep = divisorsSet1[i];
                            break;
                        }
                    }
                }
                return (newStep === -1) ? 1 : newStep;
            };
        return Utilities;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /** @enum {number} */
    var SliderHandlerEnum = {
        left: 0,
        right: 1,
    };
    SliderHandlerEnum[SliderHandlerEnum.left] = "left";
    SliderHandlerEnum[SliderHandlerEnum.right] = "right";

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NpnSliderComponent = (function (_super) {
        __extends(NpnSliderComponent, _super);
        function NpnSliderComponent(el) {
            var _this = _super.call(this) || this;
            _this.el = el;
            _this.sliderModel = [0, 0, 0];
            _this.step = 1;
            _this.sliderWidth = 0;
            _this.totalDiff = 0;
            _this.startClientX = 0;
            _this.startPleft = 0;
            _this.startPRight = 0;
            _this.sliderInitiated = false;
            _this.initValues = [];
            _this.currentValues = [0, 0];
            _this.handlerX = [0, 0];
            _this.isHandlerActive = false;
            _this.isTouchEventStart = false;
            _this.isMouseEventStart = false;
            _this.currentHandlerIndex = 0;
            _this.stepIndicatorPositions = [];
            _this.isDisabled = false;
            _this.hideTooltip = false;
            _this.hideValues = false;
            _this.handlerIndex = SliderHandlerEnum;
            _this.showStepIndicator = false;
            _this.multiRange = true;
            _this.onChange = new core.EventEmitter();
            return _this;
        }
        Object.defineProperty(NpnSliderComponent.prototype, "setMinValues", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!isNaN(value)) {
                    this.minValue = Number(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setMaxValues", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!isNaN(value)) {
                    this.maxValue = Number(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setMinSelectedValues", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!isNaN(value) && this.minSelected !== Number(value)) {
                    this.minSelected = Number(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setMaxSelectedValues", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!isNaN(value) && this.maxSelected !== Number(value)) {
                    this.maxSelected = Number(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "stepValue", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                if (!isNaN(value)) {
                    this.step = Number(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setHideTooltip", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this.hideTooltip = this.toBoolean(value);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setHideValues", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this.hideValues = this.toBoolean(value);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(NpnSliderComponent.prototype, "setDisabled", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this.isDisabled = this.toBoolean(value, 'disabled');
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.initializeSlider();
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        NpnSliderComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                if (this.sliderInitiated) {
                    if (!this.isNullOrEmpty(changes["setMinSelectedValues"])
                        && changes["setMinSelectedValues"].previousValue === changes["setMinSelectedValues"].currentValue) {
                        return;
                    }
                    if (!this.isNullOrEmpty(changes["setMaxSelectedValues"])
                        && changes["setMaxSelectedValues"].previousValue === changes["setMaxSelectedValues"].currentValue) {
                        return;
                    }
                    this.resetModel();
                }
            };
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.initializeSlider = /**
         * @return {?}
         */
            function () {
                try {
                    // Taking width of slider bar element.
                    this.sliderWidth = this.el.nativeElement.children[0].children[0].offsetWidth;
                    this.resetModel();
                    this.sliderInitiated = true;
                }
                catch (e) {
                    console.error(e);
                }
            };
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.resetModel = /**
         * @return {?}
         */
            function () {
                this.validateSliderValues();
                // Setting the model values
                this.sliderModel = [
                    this.currentValues[0] - this.initValues[0],
                    this.currentValues[1] - this.currentValues[0],
                    this.initValues[1] - this.currentValues[1]
                ];
                this.totalDiff = this.sliderModel.reduce(function (prevValue, curValue) { return prevValue + curValue; }, 0);
                // Validation for slider step
                if (this.totalDiff % this.step !== 0) {
                    var /** @type {?} */ newStep = this.findNextValidStepValue(this.totalDiff, this.step);
                    console.warn('Invalid step value "' + this.step + '" : and took "' + newStep + '" as default step');
                    this.step = newStep;
                }
                this.initializeStepIndicator();
                this.setHandlerPosition();
            };
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.validateSliderValues = /**
         * @return {?}
         */
            function () {
                if (this.isNullOrEmpty(this.minValue) || this.isNullOrEmpty(this.maxValue)) {
                    this.updateInitValues([0, 0]);
                    this.updateCurrentValue([0, 0], true);
                }
                else if (this.minValue > this.maxValue) {
                    this.updateInitValues([0, 0]);
                    this.updateCurrentValue([0, 0], true);
                }
                else {
                    this.initValues = [this.minValue, this.maxValue];
                    /*
                          * Validation for Selected range values
                          */
                    this.minSelected = this.isNullOrEmpty(this.minSelected) ? 0 : this.minSelected;
                    this.maxSelected = this.isNullOrEmpty(this.maxSelected) ? 0 : this.maxSelected;
                    if (this.minSelected < this.minValue || this.minSelected > this.maxValue) {
                        this.minSelected = this.minValue;
                    }
                    if (this.maxSelected < this.minValue || this.maxSelected > this.maxValue) {
                        this.maxSelected = this.maxValue;
                    }
                    if (this.minSelected > this.maxSelected) {
                        this.minSelected = this.minValue;
                        this.maxSelected = this.maxValue;
                    }
                    this.updateCurrentValue([this.minSelected, this.maxSelected], true);
                }
            };
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.initializeStepIndicator = /**
         * @return {?}
         */
            function () {
                if (this.showStepIndicator) {
                    this.stepIndicatorPositions.length = 0;
                    var /** @type {?} */ numOfStepIndicators = this.totalDiff / this.step;
                    if (this.sliderWidth / numOfStepIndicators >= 10) {
                        var /** @type {?} */ increment = this.sliderWidth / numOfStepIndicators;
                        var /** @type {?} */ leftPosition = increment;
                        while (this.stepIndicatorPositions.length < numOfStepIndicators - 1) {
                            this.stepIndicatorPositions.push(+leftPosition.toFixed(2));
                            leftPosition += increment;
                        }
                    }
                    else {
                        console.warn("As 'step' value is too small compared to min & max value difference and slider width,\n          Step Indicator can't be displayed!. Provide slight large value for 'step'");
                    }
                }
                else {
                    this.stepIndicatorPositions.length = 0;
                }
            };
        /**
         * @param {?} arrayValue
         * @param {?=} privateChange
         * @return {?}
         */
        NpnSliderComponent.prototype.updateCurrentValue = /**
         * @param {?} arrayValue
         * @param {?=} privateChange
         * @return {?}
         */
            function (arrayValue, privateChange) {
                if (privateChange === void 0) {
                    privateChange = false;
                }
                this.minSelected = this.currentValues[0] = arrayValue[0];
                this.maxSelected = this.currentValues[1] = arrayValue[1];
                if (!privateChange) {
                    this.onChange.emit((this.multiRange) ? this.currentValues : [this.currentValues[0]]);
                }
            };
        /**
         * @param {?} arrayValue
         * @return {?}
         */
        NpnSliderComponent.prototype.updateInitValues = /**
         * @param {?} arrayValue
         * @return {?}
         */
            function (arrayValue) {
                this.minValue = this.initValues[0] = arrayValue[0];
                this.maxValue = this.initValues[1] = arrayValue[1];
            };
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.setHandlerPosition = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ runningTotal = 0;
                // Updating selected values : current values
                this.updateCurrentValue([
                    this.initValues[0] + this.sliderModel[0],
                    this.initValues[1] - this.sliderModel[2]
                ]);
                /*Setting handler position */
                for (var /** @type {?} */ i = 0, /** @type {?} */ len = this.sliderModel.length - 1; i < len; i++) {
                    runningTotal += this.sliderModel[i];
                    this.handlerX[i] = (runningTotal / this.totalDiff) * 100;
                }
            };
        /**
         * @param {?} index
         * @param {?} value
         * @return {?}
         */
        NpnSliderComponent.prototype.setModelValue = /**
         * @param {?} index
         * @param {?} value
         * @return {?}
         */
            function (index, value) {
                if (this.step > 1) {
                    value = Math.round(value / this.step) * this.step;
                }
                this.sliderModel[index] = value;
            };
        /*Method to disable handler movement*/
        /*Execute on events:
        * on-mouseup
        * on-panend
        */
        /**
         * @return {?}
         */
        NpnSliderComponent.prototype.setHandlerActiveOff = /**
         * @return {?}
         */
            function () {
                this.isMouseEventStart = false;
                this.isTouchEventStart = false;
                this.isHandlerActive = false;
            };
        /**
         * @param {?} event
         * @param {?} handlerIndex
         * @return {?}
         */
        NpnSliderComponent.prototype.setHandlerActive = /**
         * @param {?} event
         * @param {?} handlerIndex
         * @return {?}
         */
            function (event, handlerIndex) {
                event.preventDefault();
                if (!this.isDisabled) {
                    if (!this.isNullOrEmpty(event.clientX)) {
                        this.startClientX = event.clientX;
                        this.isMouseEventStart = true;
                        this.isTouchEventStart = false;
                    }
                    else if (!this.isNullOrEmpty(event.deltaX)) {
                        this.startClientX = event.deltaX;
                        this.isTouchEventStart = true;
                        this.isMouseEventStart = false;
                    }
                    if (this.isMouseEventStart || this.isTouchEventStart) {
                        this.currentHandlerIndex = handlerIndex;
                        this.startPleft = this.sliderModel[handlerIndex];
                        this.startPRight = this.sliderModel[handlerIndex + 1];
                        this.isHandlerActive = true;
                    }
                }
            };
        /**
         * @param {?} event
         * @return {?}
         */
        NpnSliderComponent.prototype.handlerSliding = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                if ((this.isMouseEventStart && event.clientX) || (this.isTouchEventStart && event.deltaX)) {
                    var /** @type {?} */ movedX = Math.round(((event.clientX || event.deltaX) - this.startClientX) / this.sliderWidth * this.totalDiff);
                    var /** @type {?} */ nextPLeft = this.startPleft + movedX;
                    var /** @type {?} */ nextPRight = this.startPRight - movedX;
                    if (nextPLeft >= 0 && nextPRight >= 0) {
                        this.setModelValue(this.currentHandlerIndex, nextPLeft);
                        this.setModelValue(this.currentHandlerIndex + 1, nextPRight);
                        this.setHandlerPosition();
                    }
                }
            };
        NpnSliderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'npn-slider',
                        template: "<!--npn-slider template-->\n<div class=\"slider\" [class.disabled]=\"isDisabled\">\n  <div class=\"bar\" (mousemove)=\"handlerSliding($event)\" (panmove)=\"handlerSliding($event)\">\n    <span class=\"left-handle\" [ngClass]=\"{'active': isHandlerActive && currentHandlerIndex === handlerIndex.left,\n                      'last-active': currentHandlerIndex === handlerIndex.left\n                    }\"\n      [style.left.%]=\"handlerX[handlerIndex.left]\" (mousedown)=\"setHandlerActive($event, handlerIndex.left)\" (panstart)=\"setHandlerActive($event, handlerIndex.left)\">\n      <span *ngIf=\"!hideTooltip\" class=\"handle-tooltip\">{{currentValues[handlerIndex.left]}}</span>\n    </span>\n    <div class=\"filler\">\n      <div class=\"step-indicators\">\n        <span *ngFor=\"let stepPos of stepIndicatorPositions\" [style.left.px]=\"stepPos\"></span>\n      </div>\n      <span *ngIf=\"multiRange\" [style.left.%]=\"handlerX[0]\" [style.width.%]=\"handlerX[handlerIndex.right] - handlerX[handlerIndex.left]\"></span>\n      <span *ngIf=\"!multiRange\" [style.left.%]=\"0\" [style.width.%]=\"handlerX[0]\"></span>\n    </div>\n    <span *ngIf=\"multiRange\" class=\"right-handle\" [ngClass]=\"{'active': isHandlerActive && currentHandlerIndex === handlerIndex.right,\n                      'last-active': currentHandlerIndex === handlerIndex.right\n                    }\"\n      [style.left.%]=\"handlerX[handlerIndex.right]\" (mousedown)=\"setHandlerActive($event, handlerIndex.right)\"\n      (panstart)=\"setHandlerActive($event, handlerIndex.right)\">\n      <span *ngIf=\"!hideTooltip\" class=\"handle-tooltip\">{{currentValues[handlerIndex.right]}}</span>\n    </span>\n  </div>\n  <div class=\"values\" *ngIf=\"!hideValues\">\n    <span>{{initValues[handlerIndex.left]}}</span>\n    <span>{{initValues[handlerIndex.right]}}</span>\n  </div>\n</div>\n",
                        styles: [".slider,.slider *{box-sizing:border-box}.slider{display:block;width:100%;height:30px;padding:4px 10px;cursor:default;font-size:12px}.slider .bar{width:100%;background:#e8e8e8;height:10px;position:relative;border-radius:5px;box-shadow:inset 1px 1px 5px #bababa}.slider .bar>span.left-handle,.slider .bar>span.right-handle{display:inline-block;width:22px;height:22px;background:#bedcb2;border:7px solid #71b357;border-radius:50%;position:absolute;top:-7px;margin-left:-10px;z-index:1;cursor:pointer;transition:left .2s ease}.slider .bar>span.left-handle.last-active,.slider .bar>span.right-handle.last-active{z-index:2}.slider .bar>span.left-handle .handle-tooltip,.slider .bar>span.right-handle .handle-tooltip{display:block;position:absolute;top:-34px;left:-14px;border:1px solid #8fc37a;border-radius:4px;padding:1px 4px;min-width:20px;text-align:center;background:#d9ebd2;color:#71b357;font-weight:700;transition:opacity .2s ease;opacity:0}.slider .bar>span.left-handle .handle-tooltip:before,.slider .bar>span.right-handle .handle-tooltip:before{content:\"\";border:5px solid transparent;border-top-color:#8fc37a;position:absolute;top:104%;left:33%}.slider .bar>span.left-handle .handle-tooltip:after,.slider .bar>span.right-handle .handle-tooltip:after{content:\"\";border:5px solid transparent;border-top-color:#d9ebd2;position:absolute;top:100%;left:33%}.slider .bar>span.left-handle.active>.handle-tooltip,.slider .bar>span.left-handle:hover>.handle-tooltip,.slider .bar>span.right-handle.active>.handle-tooltip,.slider .bar>span.right-handle:hover>.handle-tooltip{opacity:1}.slider .bar div.filler{display:block;width:100%;height:100%;position:relative;overflow:hidden;border-radius:5px;border:1px solid #bedcb2}.slider .bar div.filler>span{display:inline-block;height:100%;position:absolute;top:0;background:#bedcb2;transition:all .2s ease}.slider .bar div.filler>div.step-indicators{width:100%;height:100%;position:relative}.slider .bar div.filler>div.step-indicators>span{width:1px;display:inline-block;height:10px;background:#71b357;position:absolute;left:0}.slider .values{display:block;font-weight:700;margin-top:4px;width:102%;margin-left:-1%;color:#908f90}.slider .values span:first-child{float:left}.slider .values span:last-child{float:right}.slider.disabled{opacity:.4}.slider.disabled .bar{box-shadow:none!important}.slider.disabled .bar>span.left-handle,.slider.disabled .bar>span.right-handle{cursor:not-allowed}.slider.disabled .bar>span.left-handle .handle-tooltip,.slider.disabled .bar>span.right-handle .handle-tooltip{display:none}"]
                    },] },
        ];
        /** @nocollapse */
        NpnSliderComponent.ctorParameters = function () {
            return [
                { type: core.ElementRef }
            ];
        };
        NpnSliderComponent.propDecorators = {
            setMinValues: [{ type: core.Input, args: ['min',] }],
            setMaxValues: [{ type: core.Input, args: ['max',] }],
            setMinSelectedValues: [{ type: core.Input, args: ['minSelected',] }],
            setMaxSelectedValues: [{ type: core.Input, args: ['maxSelected',] }],
            stepValue: [{ type: core.Input, args: ['step',] }],
            showStepIndicator: [{ type: core.Input }],
            multiRange: [{ type: core.Input }],
            setHideTooltip: [{ type: core.Input, args: ['hide-tooltip',] }],
            setHideValues: [{ type: core.Input, args: ['hide-values',] }],
            setDisabled: [{ type: core.Input, args: ['disabled',] }],
            onChange: [{ type: core.Output }],
            setHandlerActiveOff: [{ type: core.HostListener, args: ['document:mouseup',] }, { type: core.HostListener, args: ['document:panend',] }]
        };
        return NpnSliderComponent;
    }(Utilities));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NpnSliderModule = (function () {
        function NpnSliderModule() {
        }
        NpnSliderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule
                        ],
                        declarations: [NpnSliderComponent],
                        exports: [NpnSliderComponent]
                    },] },
        ];
        return NpnSliderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.NpnSliderComponent = NpnSliderComponent;
    exports.NpnSliderModule = NpnSliderModule;
    exports.ɵa = Utilities;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnBuLXNsaWRlci51bWQuanMubWFwIiwic291cmNlcyI6W251bGwsIm5nOi8vbnBuLXNsaWRlci9saWIvdXRpbGl0aWVzLnRzIiwibmc6Ly9ucG4tc2xpZGVyL2xpYi9ucG4tc2xpZGVyLmNvbXBvbmVudC50cyIsIm5nOi8vbnBuLXNsaWRlci9saWIvbnBuLXNsaWRlci5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJcclxuXHJcbi8qVXRpbGl0aWVzICovXHJcbmV4cG9ydCBjbGFzcyBVdGlsaXRpZXMge1xyXG5cclxuICBwdWJsaWMgaXNOdW1iZXJBcnJheShhcnI6IG51bWJlcltdKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKGFyciAmJiBhcnIubGVuZ3RoICYmIGFyci5maWx0ZXIoKHZhbHVlKSA9PiAhaXNOYU4odmFsdWUpKS5sZW5ndGggPT09IGFyci5sZW5ndGgpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIH1cclxuICBwdWJsaWMgaXNOdWxsT3JFbXB0eShvYmo6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8IG9iaiA9PT0gbnVsbCB8fCBvYmogPT09ICcnO1xyXG4gIH1cclxuICBwdWJsaWMgdG9Cb29sZWFuKG9iajogYW55LCAuLi5hbGxvd2VkVmFsdWVzKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKG9iaiA9PT0gJycgfHwgb2JqID09PSAndHJ1ZScgfHwgYWxsb3dlZFZhbHVlcy5pbmRleE9mKG9iaikgIT09IC0xKSA/IHRydWUgOiBmYWxzZTtcclxuICB9XHJcbiAgcHVibGljIGZpbmROZXh0VmFsaWRTdGVwVmFsdWUobjogbnVtYmVyLCBzdGVwOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgZGl2aXNvcnNTZXQxOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgY29uc3QgZGl2aXNvcnNTZXQyOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgY29uc3Qgc3FydE51bSA9IE1hdGguc3FydChuKTtcclxuICAgIGxldCBuZXdTdGVwID0gLTE7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNxcnROdW07IGkrKykge1xyXG4gICAgICBpZiAobiAlIGkgPT09IDApIHtcclxuICAgICAgICBpZiAoKG4gLyBpKSA9PT0gaSkge1xyXG4gICAgICAgICAgZGl2aXNvcnNTZXQxLnB1c2goaSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRpdmlzb3JzU2V0MS5wdXNoKGkpO1xyXG4gICAgICAgICAgZGl2aXNvcnNTZXQyLnB1c2gobiAvIGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gUGlja2luZyBuZXdTdGVwIGJ5IGNoZWNraW5nIGxhcmdlIHNldCBvZiBkaXZpc29ycyBmaXJzdFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXZpc29yc1NldDIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHN0ZXAgPiBkaXZpc29yc1NldDJbaV0pIHtcclxuICAgICAgICBuZXdTdGVwID0gZGl2aXNvcnNTZXQyW2ldO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobmV3U3RlcCA9PT0gLTEpIHsgLy8gY2hlY2tpbmcgc2V0IG9mIHNtYWxsIGRpdmlzb3JzIGlmIG5ld1N0ZXAgZGlkbid0IGZpbmQgb3V0IHRpbGwuXHJcbiAgICAgIGZvciAobGV0IGkgPSBkaXZpc29yc1NldDEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICBpZiAoc3RlcCA+IGRpdmlzb3JzU2V0MVtpXSkge1xyXG4gICAgICAgICAgbmV3U3RlcCA9IGRpdmlzb3JzU2V0MVtpXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIChuZXdTdGVwID09PSAtMSkgPyAxIDogbmV3U3RlcDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlcixcclxuICBFbGVtZW50UmVmLCBPbkluaXQsIEhvc3RMaXN0ZW5lciwgU2ltcGxlQ2hhbmdlcywgT25DaGFuZ2VzXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFV0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzJztcclxuaW1wb3J0IHsgU2xpZGVySGFuZGxlckVudW0gfSBmcm9tICcuL3NsaWRlci1oYW5kbGVyLmVudW0nO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICducG4tc2xpZGVyJyxcclxuICB0ZW1wbGF0ZTogYDwhLS1ucG4tc2xpZGVyIHRlbXBsYXRlLS0+XHJcbjxkaXYgY2xhc3M9XCJzbGlkZXJcIiBbY2xhc3MuZGlzYWJsZWRdPVwiaXNEaXNhYmxlZFwiPlxyXG4gIDxkaXYgY2xhc3M9XCJiYXJcIiAobW91c2Vtb3ZlKT1cImhhbmRsZXJTbGlkaW5nKCRldmVudClcIiAocGFubW92ZSk9XCJoYW5kbGVyU2xpZGluZygkZXZlbnQpXCI+XHJcbiAgICA8c3BhbiBjbGFzcz1cImxlZnQtaGFuZGxlXCIgW25nQ2xhc3NdPVwieydhY3RpdmUnOiBpc0hhbmRsZXJBY3RpdmUgJiYgY3VycmVudEhhbmRsZXJJbmRleCA9PT0gaGFuZGxlckluZGV4LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAnbGFzdC1hY3RpdmUnOiBjdXJyZW50SGFuZGxlckluZGV4ID09PSBoYW5kbGVySW5kZXgubGVmdFxyXG4gICAgICAgICAgICAgICAgICAgIH1cIlxyXG4gICAgICBbc3R5bGUubGVmdC4lXT1cImhhbmRsZXJYW2hhbmRsZXJJbmRleC5sZWZ0XVwiIChtb3VzZWRvd24pPVwic2V0SGFuZGxlckFjdGl2ZSgkZXZlbnQsIGhhbmRsZXJJbmRleC5sZWZ0KVwiIChwYW5zdGFydCk9XCJzZXRIYW5kbGVyQWN0aXZlKCRldmVudCwgaGFuZGxlckluZGV4LmxlZnQpXCI+XHJcbiAgICAgIDxzcGFuICpuZ0lmPVwiIWhpZGVUb29sdGlwXCIgY2xhc3M9XCJoYW5kbGUtdG9vbHRpcFwiPnt7Y3VycmVudFZhbHVlc1toYW5kbGVySW5kZXgubGVmdF19fTwvc3Bhbj5cclxuICAgIDwvc3Bhbj5cclxuICAgIDxkaXYgY2xhc3M9XCJmaWxsZXJcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0ZXAtaW5kaWNhdG9yc1wiPlxyXG4gICAgICAgIDxzcGFuICpuZ0Zvcj1cImxldCBzdGVwUG9zIG9mIHN0ZXBJbmRpY2F0b3JQb3NpdGlvbnNcIiBbc3R5bGUubGVmdC5weF09XCJzdGVwUG9zXCI+PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPHNwYW4gKm5nSWY9XCJtdWx0aVJhbmdlXCIgW3N0eWxlLmxlZnQuJV09XCJoYW5kbGVyWFswXVwiIFtzdHlsZS53aWR0aC4lXT1cImhhbmRsZXJYW2hhbmRsZXJJbmRleC5yaWdodF0gLSBoYW5kbGVyWFtoYW5kbGVySW5kZXgubGVmdF1cIj48L3NwYW4+XHJcbiAgICAgIDxzcGFuICpuZ0lmPVwiIW11bHRpUmFuZ2VcIiBbc3R5bGUubGVmdC4lXT1cIjBcIiBbc3R5bGUud2lkdGguJV09XCJoYW5kbGVyWFswXVwiPjwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPHNwYW4gKm5nSWY9XCJtdWx0aVJhbmdlXCIgY2xhc3M9XCJyaWdodC1oYW5kbGVcIiBbbmdDbGFzc109XCJ7J2FjdGl2ZSc6IGlzSGFuZGxlckFjdGl2ZSAmJiBjdXJyZW50SGFuZGxlckluZGV4ID09PSBoYW5kbGVySW5kZXgucmlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAnbGFzdC1hY3RpdmUnOiBjdXJyZW50SGFuZGxlckluZGV4ID09PSBoYW5kbGVySW5kZXgucmlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9XCJcclxuICAgICAgW3N0eWxlLmxlZnQuJV09XCJoYW5kbGVyWFtoYW5kbGVySW5kZXgucmlnaHRdXCIgKG1vdXNlZG93bik9XCJzZXRIYW5kbGVyQWN0aXZlKCRldmVudCwgaGFuZGxlckluZGV4LnJpZ2h0KVwiXHJcbiAgICAgIChwYW5zdGFydCk9XCJzZXRIYW5kbGVyQWN0aXZlKCRldmVudCwgaGFuZGxlckluZGV4LnJpZ2h0KVwiPlxyXG4gICAgICA8c3BhbiAqbmdJZj1cIiFoaWRlVG9vbHRpcFwiIGNsYXNzPVwiaGFuZGxlLXRvb2x0aXBcIj57e2N1cnJlbnRWYWx1ZXNbaGFuZGxlckluZGV4LnJpZ2h0XX19PC9zcGFuPlxyXG4gICAgPC9zcGFuPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgY2xhc3M9XCJ2YWx1ZXNcIiAqbmdJZj1cIiFoaWRlVmFsdWVzXCI+XHJcbiAgICA8c3Bhbj57e2luaXRWYWx1ZXNbaGFuZGxlckluZGV4LmxlZnRdfX08L3NwYW4+XHJcbiAgICA8c3Bhbj57e2luaXRWYWx1ZXNbaGFuZGxlckluZGV4LnJpZ2h0XX19PC9zcGFuPlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuYCxcclxuICBzdHlsZXM6IFtgLnNsaWRlciwuc2xpZGVyICp7Ym94LXNpemluZzpib3JkZXItYm94fS5zbGlkZXJ7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDozMHB4O3BhZGRpbmc6NHB4IDEwcHg7Y3Vyc29yOmRlZmF1bHQ7Zm9udC1zaXplOjEycHh9LnNsaWRlciAuYmFye3dpZHRoOjEwMCU7YmFja2dyb3VuZDojZThlOGU4O2hlaWdodDoxMHB4O3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlci1yYWRpdXM6NXB4O2JveC1zaGFkb3c6aW5zZXQgMXB4IDFweCA1cHggI2JhYmFiYX0uc2xpZGVyIC5iYXI+c3Bhbi5sZWZ0LWhhbmRsZSwuc2xpZGVyIC5iYXI+c3Bhbi5yaWdodC1oYW5kbGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjJweDtoZWlnaHQ6MjJweDtiYWNrZ3JvdW5kOiNiZWRjYjI7Ym9yZGVyOjdweCBzb2xpZCAjNzFiMzU3O2JvcmRlci1yYWRpdXM6NTAlO3Bvc2l0aW9uOmFic29sdXRlO3RvcDotN3B4O21hcmdpbi1sZWZ0Oi0xMHB4O3otaW5kZXg6MTtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmxlZnQgLjJzIGVhc2V9LnNsaWRlciAuYmFyPnNwYW4ubGVmdC1oYW5kbGUubGFzdC1hY3RpdmUsLnNsaWRlciAuYmFyPnNwYW4ucmlnaHQtaGFuZGxlLmxhc3QtYWN0aXZle3otaW5kZXg6Mn0uc2xpZGVyIC5iYXI+c3Bhbi5sZWZ0LWhhbmRsZSAuaGFuZGxlLXRvb2x0aXAsLnNsaWRlciAuYmFyPnNwYW4ucmlnaHQtaGFuZGxlIC5oYW5kbGUtdG9vbHRpcHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDotMzRweDtsZWZ0Oi0xNHB4O2JvcmRlcjoxcHggc29saWQgIzhmYzM3YTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjFweCA0cHg7bWluLXdpZHRoOjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojZDllYmQyO2NvbG9yOiM3MWIzNTc7Zm9udC13ZWlnaHQ6NzAwO3RyYW5zaXRpb246b3BhY2l0eSAuMnMgZWFzZTtvcGFjaXR5OjB9LnNsaWRlciAuYmFyPnNwYW4ubGVmdC1oYW5kbGUgLmhhbmRsZS10b29sdGlwOmJlZm9yZSwuc2xpZGVyIC5iYXI+c3Bhbi5yaWdodC1oYW5kbGUgLmhhbmRsZS10b29sdGlwOmJlZm9yZXtjb250ZW50OlwiXCI7Ym9yZGVyOjVweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItdG9wLWNvbG9yOiM4ZmMzN2E7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwNCU7bGVmdDozMyV9LnNsaWRlciAuYmFyPnNwYW4ubGVmdC1oYW5kbGUgLmhhbmRsZS10b29sdGlwOmFmdGVyLC5zbGlkZXIgLmJhcj5zcGFuLnJpZ2h0LWhhbmRsZSAuaGFuZGxlLXRvb2x0aXA6YWZ0ZXJ7Y29udGVudDpcIlwiO2JvcmRlcjo1cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcC1jb2xvcjojZDllYmQyO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxMDAlO2xlZnQ6MzMlfS5zbGlkZXIgLmJhcj5zcGFuLmxlZnQtaGFuZGxlLmFjdGl2ZT4uaGFuZGxlLXRvb2x0aXAsLnNsaWRlciAuYmFyPnNwYW4ubGVmdC1oYW5kbGU6aG92ZXI+LmhhbmRsZS10b29sdGlwLC5zbGlkZXIgLmJhcj5zcGFuLnJpZ2h0LWhhbmRsZS5hY3RpdmU+LmhhbmRsZS10b29sdGlwLC5zbGlkZXIgLmJhcj5zcGFuLnJpZ2h0LWhhbmRsZTpob3Zlcj4uaGFuZGxlLXRvb2x0aXB7b3BhY2l0eToxfS5zbGlkZXIgLmJhciBkaXYuZmlsbGVye2Rpc3BsYXk6YmxvY2s7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjYmVkY2IyfS5zbGlkZXIgLmJhciBkaXYuZmlsbGVyPnNwYW57ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OjEwMCU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7YmFja2dyb3VuZDojYmVkY2IyO3RyYW5zaXRpb246YWxsIC4ycyBlYXNlfS5zbGlkZXIgLmJhciBkaXYuZmlsbGVyPmRpdi5zdGVwLWluZGljYXRvcnN7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZX0uc2xpZGVyIC5iYXIgZGl2LmZpbGxlcj5kaXYuc3RlcC1pbmRpY2F0b3JzPnNwYW57d2lkdGg6MXB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO2hlaWdodDoxMHB4O2JhY2tncm91bmQ6IzcxYjM1Nztwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjB9LnNsaWRlciAudmFsdWVze2Rpc3BsYXk6YmxvY2s7Zm9udC13ZWlnaHQ6NzAwO21hcmdpbi10b3A6NHB4O3dpZHRoOjEwMiU7bWFyZ2luLWxlZnQ6LTElO2NvbG9yOiM5MDhmOTB9LnNsaWRlciAudmFsdWVzIHNwYW46Zmlyc3QtY2hpbGR7ZmxvYXQ6bGVmdH0uc2xpZGVyIC52YWx1ZXMgc3BhbjpsYXN0LWNoaWxke2Zsb2F0OnJpZ2h0fS5zbGlkZXIuZGlzYWJsZWR7b3BhY2l0eTouNH0uc2xpZGVyLmRpc2FibGVkIC5iYXJ7Ym94LXNoYWRvdzpub25lIWltcG9ydGFudH0uc2xpZGVyLmRpc2FibGVkIC5iYXI+c3Bhbi5sZWZ0LWhhbmRsZSwuc2xpZGVyLmRpc2FibGVkIC5iYXI+c3Bhbi5yaWdodC1oYW5kbGV7Y3Vyc29yOm5vdC1hbGxvd2VkfS5zbGlkZXIuZGlzYWJsZWQgLmJhcj5zcGFuLmxlZnQtaGFuZGxlIC5oYW5kbGUtdG9vbHRpcCwuc2xpZGVyLmRpc2FibGVkIC5iYXI+c3Bhbi5yaWdodC1oYW5kbGUgLmhhbmRsZS10b29sdGlwe2Rpc3BsYXk6bm9uZX1gXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTnBuU2xpZGVyQ29tcG9uZW50IGV4dGVuZHMgVXRpbGl0aWVzIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIHByaXZhdGUgc2xpZGVyTW9kZWwgPSBbMCwgMCwgMF07XHJcbiAgcHJpdmF0ZSBzdGVwID0gMTtcclxuICBwcml2YXRlIHNsaWRlcldpZHRoID0gMDtcclxuICBwcml2YXRlIHRvdGFsRGlmZiA9IDA7XHJcbiAgcHJpdmF0ZSBzdGFydENsaWVudFggPSAwO1xyXG4gIHByaXZhdGUgc3RhcnRQbGVmdCA9IDA7XHJcbiAgcHJpdmF0ZSBzdGFydFBSaWdodCA9IDA7XHJcbiAgcHJpdmF0ZSBtaW5WYWx1ZTogbnVtYmVyO1xyXG4gIHByaXZhdGUgbWF4VmFsdWU6IG51bWJlcjtcclxuICBwcml2YXRlIG1pblNlbGVjdGVkOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBtYXhTZWxlY3RlZDogbnVtYmVyO1xyXG4gIHByaXZhdGUgc2xpZGVySW5pdGlhdGVkID0gZmFsc2U7XHJcblxyXG4gIHB1YmxpYyBpbml0VmFsdWVzOiBudW1iZXJbXSA9IFtdO1xyXG4gIHB1YmxpYyBjdXJyZW50VmFsdWVzOiBudW1iZXJbXSA9IFswLCAwXTtcclxuICBwdWJsaWMgaGFuZGxlclg6IG51bWJlcltdID0gWzAsIDBdO1xyXG4gIHB1YmxpYyBpc0hhbmRsZXJBY3RpdmUgPSBmYWxzZTtcclxuICBwdWJsaWMgaXNUb3VjaEV2ZW50U3RhcnQgPSBmYWxzZTtcclxuICBwdWJsaWMgaXNNb3VzZUV2ZW50U3RhcnQgPSBmYWxzZTtcclxuICBwdWJsaWMgY3VycmVudEhhbmRsZXJJbmRleCA9IDA7XHJcbiAgcHVibGljIHN0ZXBJbmRpY2F0b3JQb3NpdGlvbnMgPSBbXTtcclxuICBwdWJsaWMgaXNEaXNhYmxlZCA9IGZhbHNlO1xyXG4gIHB1YmxpYyBoaWRlVG9vbHRpcCA9IGZhbHNlO1xyXG4gIHB1YmxpYyBoaWRlVmFsdWVzID0gZmFsc2U7XHJcblxyXG4gIHB1YmxpYyBoYW5kbGVySW5kZXggPSBTbGlkZXJIYW5kbGVyRW51bTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZikge1xyXG4gICAgc3VwZXIoKTtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgnbWluJylcclxuICBzZXQgc2V0TWluVmFsdWVzKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgIHRoaXMubWluVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQElucHV0KCdtYXgnKVxyXG4gIHNldCBzZXRNYXhWYWx1ZXModmFsdWU6IG51bWJlcikge1xyXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5tYXhWYWx1ZSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ21pblNlbGVjdGVkJylcclxuICBzZXQgc2V0TWluU2VsZWN0ZWRWYWx1ZXModmFsdWU6IG51bWJlcikge1xyXG4gICAgaWYgKCFpc05hTih2YWx1ZSkgJiYgdGhpcy5taW5TZWxlY3RlZCAhPT0gTnVtYmVyKHZhbHVlKSkge1xyXG4gICAgICB0aGlzLm1pblNlbGVjdGVkID0gTnVtYmVyKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBJbnB1dCgnbWF4U2VsZWN0ZWQnKVxyXG4gIHNldCBzZXRNYXhTZWxlY3RlZFZhbHVlcyh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB0aGlzLm1heFNlbGVjdGVkICE9PSBOdW1iZXIodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMubWF4U2VsZWN0ZWQgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBASW5wdXQoJ3N0ZXAnKVxyXG4gIHNldCBzdGVwVmFsdWUodmFsdWU6IG51bWJlcikge1xyXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgdGhpcy5zdGVwID0gTnVtYmVyKHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBJbnB1dCgpIHNob3dTdGVwSW5kaWNhdG9yID0gZmFsc2U7XHJcbiAgQElucHV0KCkgbXVsdGlSYW5nZSA9IHRydWU7XHJcbiAgQElucHV0KCdoaWRlLXRvb2x0aXAnKVxyXG4gIHNldCBzZXRIaWRlVG9vbHRpcCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5oaWRlVG9vbHRpcCA9IHRoaXMudG9Cb29sZWFuKHZhbHVlKTtcclxuICB9XHJcbiAgQElucHV0KCdoaWRlLXZhbHVlcycpXHJcbiAgc2V0IHNldEhpZGVWYWx1ZXModmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuaGlkZVZhbHVlcyA9IHRoaXMudG9Cb29sZWFuKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgnZGlzYWJsZWQnKVxyXG4gIHNldCBzZXREaXNhYmxlZCh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmlzRGlzYWJsZWQgPSB0aGlzLnRvQm9vbGVhbih2YWx1ZSwgJ2Rpc2FibGVkJyk7XHJcbiAgfVxyXG5cclxuICBAT3V0cHV0KCkgb25DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcltdPigpO1xyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZVNsaWRlcigpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xyXG4gICAgaWYgKHRoaXMuc2xpZGVySW5pdGlhdGVkKSB7XHJcbiAgICAgIGlmICghdGhpcy5pc051bGxPckVtcHR5KGNoYW5nZXMuc2V0TWluU2VsZWN0ZWRWYWx1ZXMpXHJcbiAgICAgICAgJiYgY2hhbmdlcy5zZXRNaW5TZWxlY3RlZFZhbHVlcy5wcmV2aW91c1ZhbHVlID09PSBjaGFuZ2VzLnNldE1pblNlbGVjdGVkVmFsdWVzLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuaXNOdWxsT3JFbXB0eShjaGFuZ2VzLnNldE1heFNlbGVjdGVkVmFsdWVzKVxyXG4gICAgICAgICYmIGNoYW5nZXMuc2V0TWF4U2VsZWN0ZWRWYWx1ZXMucHJldmlvdXNWYWx1ZSA9PT0gY2hhbmdlcy5zZXRNYXhTZWxlY3RlZFZhbHVlcy5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZXNldE1vZGVsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKk1ldGhvZCB0byBpbml0YWlsaXplIGVudGlyZSBTbGlkZXIqL1xyXG4gIHB1YmxpYyBpbml0aWFsaXplU2xpZGVyKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVGFraW5nIHdpZHRoIG9mIHNsaWRlciBiYXIgZWxlbWVudC5cclxuICAgICAgdGhpcy5zbGlkZXJXaWR0aCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5vZmZzZXRXaWR0aDtcclxuICAgICAgdGhpcy5yZXNldE1vZGVsKCk7XHJcbiAgICAgIHRoaXMuc2xpZGVySW5pdGlhdGVkID0gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qTWV0aG9kIHRvIGluaXRpYWxpemUgdmFyaWFibGVzIGFuZCBtb2RlbCB2YWx1ZXMgKi9cclxuICBwcml2YXRlIHJlc2V0TW9kZWwoKSB7XHJcbiAgICB0aGlzLnZhbGlkYXRlU2xpZGVyVmFsdWVzKCk7XHJcbiAgICAvLyBTZXR0aW5nIHRoZSBtb2RlbCB2YWx1ZXNcclxuICAgIHRoaXMuc2xpZGVyTW9kZWwgPSBbXHJcbiAgICAgIHRoaXMuY3VycmVudFZhbHVlc1swXSAtIHRoaXMuaW5pdFZhbHVlc1swXSxcclxuICAgICAgdGhpcy5jdXJyZW50VmFsdWVzWzFdIC0gdGhpcy5jdXJyZW50VmFsdWVzWzBdLFxyXG4gICAgICB0aGlzLmluaXRWYWx1ZXNbMV0gLSB0aGlzLmN1cnJlbnRWYWx1ZXNbMV1cclxuICAgIF07XHJcblxyXG4gICAgdGhpcy50b3RhbERpZmYgPSB0aGlzLnNsaWRlck1vZGVsLnJlZHVjZSgocHJldlZhbHVlLCBjdXJWYWx1ZSkgPT4gcHJldlZhbHVlICsgY3VyVmFsdWUsIDApO1xyXG5cclxuICAgIC8vIFZhbGlkYXRpb24gZm9yIHNsaWRlciBzdGVwXHJcbiAgICBpZiAodGhpcy50b3RhbERpZmYgJSB0aGlzLnN0ZXAgIT09IDApIHtcclxuICAgICAgY29uc3QgbmV3U3RlcCA9IHRoaXMuZmluZE5leHRWYWxpZFN0ZXBWYWx1ZSh0aGlzLnRvdGFsRGlmZiwgdGhpcy5zdGVwKTtcclxuICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHN0ZXAgdmFsdWUgXCInICsgdGhpcy5zdGVwICsgJ1wiIDogYW5kIHRvb2sgXCInICsgbmV3U3RlcCArICdcIiBhcyBkZWZhdWx0IHN0ZXAnKTtcclxuICAgICAgdGhpcy5zdGVwID0gbmV3U3RlcDtcclxuICAgIH1cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVN0ZXBJbmRpY2F0b3IoKTtcclxuICAgIHRoaXMuc2V0SGFuZGxlclBvc2l0aW9uKCk7XHJcbiAgfVxyXG5cclxuICAvKk1ldGhvZCB0byBkbyB2YWxpZGF0aW9uIG9mIGluaXQgYW5kIHNlbGV0ZWQgcmFuZ2UgdmFsdWVzKi9cclxuICBwcml2YXRlIHZhbGlkYXRlU2xpZGVyVmFsdWVzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNOdWxsT3JFbXB0eSh0aGlzLm1pblZhbHVlKSB8fCB0aGlzLmlzTnVsbE9yRW1wdHkodGhpcy5tYXhWYWx1ZSkpIHtcclxuICAgICAgdGhpcy51cGRhdGVJbml0VmFsdWVzKFswLCAwXSk7XHJcbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudFZhbHVlKFswLCAwXSwgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMubWluVmFsdWUgPiB0aGlzLm1heFZhbHVlKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlSW5pdFZhbHVlcyhbMCwgMF0pO1xyXG4gICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRWYWx1ZShbMCwgMF0sIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pbml0VmFsdWVzID0gW3RoaXMubWluVmFsdWUsIHRoaXMubWF4VmFsdWVdO1xyXG4gICAgICAvKlxyXG4gICAgICAqIFZhbGlkYXRpb24gZm9yIFNlbGVjdGVkIHJhbmdlIHZhbHVlc1xyXG4gICAgICAqL1xyXG4gICAgICB0aGlzLm1pblNlbGVjdGVkID0gdGhpcy5pc051bGxPckVtcHR5KHRoaXMubWluU2VsZWN0ZWQpID8gMCA6IHRoaXMubWluU2VsZWN0ZWQ7XHJcbiAgICAgIHRoaXMubWF4U2VsZWN0ZWQgPSB0aGlzLmlzTnVsbE9yRW1wdHkodGhpcy5tYXhTZWxlY3RlZCkgPyAwIDogdGhpcy5tYXhTZWxlY3RlZDtcclxuXHJcbiAgICAgIGlmICh0aGlzLm1pblNlbGVjdGVkIDwgdGhpcy5taW5WYWx1ZSB8fCB0aGlzLm1pblNlbGVjdGVkID4gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubWluU2VsZWN0ZWQgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm1heFNlbGVjdGVkIDwgdGhpcy5taW5WYWx1ZSB8fCB0aGlzLm1heFNlbGVjdGVkID4gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubWF4U2VsZWN0ZWQgPSB0aGlzLm1heFZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm1pblNlbGVjdGVkID4gdGhpcy5tYXhTZWxlY3RlZCkge1xyXG4gICAgICAgIHRoaXMubWluU2VsZWN0ZWQgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgICAgIHRoaXMubWF4U2VsZWN0ZWQgPSB0aGlzLm1heFZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudFZhbHVlKFt0aGlzLm1pblNlbGVjdGVkLCB0aGlzLm1heFNlbGVjdGVkXSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKk1ldGhvZCB0byBhZGQgc3RlcCBpbmlkaWNhdG9yIHRvIHNsaWRlciAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVN0ZXBJbmRpY2F0b3IoKSB7XHJcbiAgICBpZiAodGhpcy5zaG93U3RlcEluZGljYXRvcikge1xyXG4gICAgICB0aGlzLnN0ZXBJbmRpY2F0b3JQb3NpdGlvbnMubGVuZ3RoID0gMDtcclxuICAgICAgY29uc3QgbnVtT2ZTdGVwSW5kaWNhdG9ycyA9IHRoaXMudG90YWxEaWZmIC8gdGhpcy5zdGVwO1xyXG4gICAgICBpZiAodGhpcy5zbGlkZXJXaWR0aCAvIG51bU9mU3RlcEluZGljYXRvcnMgPj0gMTApIHtcclxuICAgICAgICBjb25zdCBpbmNyZW1lbnQgPSB0aGlzLnNsaWRlcldpZHRoIC8gbnVtT2ZTdGVwSW5kaWNhdG9ycztcclxuICAgICAgICBsZXQgbGVmdFBvc2l0aW9uID0gaW5jcmVtZW50O1xyXG4gICAgICAgIHdoaWxlICh0aGlzLnN0ZXBJbmRpY2F0b3JQb3NpdGlvbnMubGVuZ3RoIDwgbnVtT2ZTdGVwSW5kaWNhdG9ycyAtIDEpIHtcclxuICAgICAgICAgIHRoaXMuc3RlcEluZGljYXRvclBvc2l0aW9ucy5wdXNoKCtsZWZ0UG9zaXRpb24udG9GaXhlZCgyKSk7XHJcbiAgICAgICAgICBsZWZ0UG9zaXRpb24gKz0gaW5jcmVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYEFzICdzdGVwJyB2YWx1ZSBpcyB0b28gc21hbGwgY29tcGFyZWQgdG8gbWluICYgbWF4IHZhbHVlIGRpZmZlcmVuY2UgYW5kIHNsaWRlciB3aWR0aCxcclxuICAgICAgICAgIFN0ZXAgSW5kaWNhdG9yIGNhbid0IGJlIGRpc3BsYXllZCEuIFByb3ZpZGUgc2xpZ2h0IGxhcmdlIHZhbHVlIGZvciAnc3RlcCdgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdGVwSW5kaWNhdG9yUG9zaXRpb25zLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKk1ldGhvZCB0byBzZXQgY3VycmVudCBzZWxlY3RlZCB2YWx1ZXMgKi9cclxuICBwcml2YXRlIHVwZGF0ZUN1cnJlbnRWYWx1ZShhcnJheVZhbHVlOiBudW1iZXJbXSwgcHJpdmF0ZUNoYW5nZTogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLm1pblNlbGVjdGVkID0gdGhpcy5jdXJyZW50VmFsdWVzWzBdID0gYXJyYXlWYWx1ZVswXTtcclxuICAgIHRoaXMubWF4U2VsZWN0ZWQgPSB0aGlzLmN1cnJlbnRWYWx1ZXNbMV0gPSBhcnJheVZhbHVlWzFdO1xyXG4gICAgaWYgKCFwcml2YXRlQ2hhbmdlKSB7XHJcbiAgICAgIHRoaXMub25DaGFuZ2UuZW1pdCgodGhpcy5tdWx0aVJhbmdlKSA/IHRoaXMuY3VycmVudFZhbHVlcyA6IFt0aGlzLmN1cnJlbnRWYWx1ZXNbMF1dKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qTWV0aG9kIHRvIHNldCBjdXJyZW50IHNlbGVjdGVkIHZhbHVlcyAqL1xyXG4gIHByaXZhdGUgdXBkYXRlSW5pdFZhbHVlcyhhcnJheVZhbHVlOiBudW1iZXJbXSkge1xyXG4gICAgdGhpcy5taW5WYWx1ZSA9IHRoaXMuaW5pdFZhbHVlc1swXSA9IGFycmF5VmFsdWVbMF07XHJcbiAgICB0aGlzLm1heFZhbHVlID0gdGhpcy5pbml0VmFsdWVzWzFdID0gYXJyYXlWYWx1ZVsxXTtcclxuICB9XHJcblxyXG4gIC8qTWV0aG9kIHRvIHNldCBoYW5kbGVyIHBvc2l0aW9uICovXHJcbiAgcHJpdmF0ZSBzZXRIYW5kbGVyUG9zaXRpb24oKSB7XHJcbiAgICBsZXQgcnVubmluZ1RvdGFsID0gMDtcclxuICAgIC8vIFVwZGF0aW5nIHNlbGVjdGVkIHZhbHVlcyA6IGN1cnJlbnQgdmFsdWVzXHJcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRWYWx1ZShbXHJcbiAgICAgIHRoaXMuaW5pdFZhbHVlc1swXSArIHRoaXMuc2xpZGVyTW9kZWxbMF0sXHJcbiAgICAgIHRoaXMuaW5pdFZhbHVlc1sxXSAtIHRoaXMuc2xpZGVyTW9kZWxbMl1cclxuICAgIF0pO1xyXG4gICAgLypTZXR0aW5nIGhhbmRsZXIgcG9zaXRpb24gKi9cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLnNsaWRlck1vZGVsLmxlbmd0aCAtIDE7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBydW5uaW5nVG90YWwgKz0gdGhpcy5zbGlkZXJNb2RlbFtpXTtcclxuICAgICAgdGhpcy5oYW5kbGVyWFtpXSA9IChydW5uaW5nVG90YWwgLyB0aGlzLnRvdGFsRGlmZikgKiAxMDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKk1ldGhvZCB0byBzZXQgbW9kZWwgYXJyYXkgdmFsdWVzIC0gd2lsbCB0cnkgdG8gcmVmaW5lIHRoZSB2YWx1ZXMgdXNpbmcgc3RlcCAqL1xyXG4gIHByaXZhdGUgc2V0TW9kZWxWYWx1ZShpbmRleDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICBpZiAodGhpcy5zdGVwID4gMSkge1xyXG4gICAgICB2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUgLyB0aGlzLnN0ZXApICogdGhpcy5zdGVwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zbGlkZXJNb2RlbFtpbmRleF0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qTWV0aG9kIHRvIGRpc2FibGUgaGFuZGxlciBtb3ZlbWVudCovXHJcbiAgLypFeGVjdXRlIG9uIGV2ZW50czpcclxuICAqIG9uLW1vdXNldXBcclxuICAqIG9uLXBhbmVuZFxyXG4gICovXHJcbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6bW91c2V1cCcpXHJcbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6cGFuZW5kJylcclxuICBzZXRIYW5kbGVyQWN0aXZlT2ZmKCkge1xyXG4gICAgdGhpcy5pc01vdXNlRXZlbnRTdGFydCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc1RvdWNoRXZlbnRTdGFydCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc0hhbmRsZXJBY3RpdmUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qTWV0aG9kIHRvIGRldGVjdCBzdGFydCBkcmFnaW5nIGhhbmRsZXIqL1xyXG4gIC8qRXhlY3V0ZSBvbiBldmVudHM6XHJcbiAgKiBvbi1tb3VzZWRvd25cclxuICAqIG9uLXBhbnN0YXJ0XHJcbiAgKi9cclxuICBwdWJsaWMgc2V0SGFuZGxlckFjdGl2ZShldmVudDogYW55LCBoYW5kbGVySW5kZXg6IG51bWJlcikge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICghdGhpcy5pc0Rpc2FibGVkKSB7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuaXNOdWxsT3JFbXB0eShldmVudC5jbGllbnRYKSkge1xyXG4gICAgICAgIHRoaXMuc3RhcnRDbGllbnRYID0gZXZlbnQuY2xpZW50WDtcclxuICAgICAgICB0aGlzLmlzTW91c2VFdmVudFN0YXJ0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzVG91Y2hFdmVudFN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNOdWxsT3JFbXB0eShldmVudC5kZWx0YVgpKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydENsaWVudFggPSBldmVudC5kZWx0YVg7XHJcbiAgICAgICAgdGhpcy5pc1RvdWNoRXZlbnRTdGFydCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pc01vdXNlRXZlbnRTdGFydCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmlzTW91c2VFdmVudFN0YXJ0IHx8IHRoaXMuaXNUb3VjaEV2ZW50U3RhcnQpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRIYW5kbGVySW5kZXggPSBoYW5kbGVySW5kZXg7XHJcbiAgICAgICAgdGhpcy5zdGFydFBsZWZ0ID0gdGhpcy5zbGlkZXJNb2RlbFtoYW5kbGVySW5kZXhdO1xyXG4gICAgICAgIHRoaXMuc3RhcnRQUmlnaHQgPSB0aGlzLnNsaWRlck1vZGVsW2hhbmRsZXJJbmRleCArIDFdO1xyXG4gICAgICAgIHRoaXMuaXNIYW5kbGVyQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qTWV0aG9kIHRvIGNhbGN1bGF0ZSBzaWxkZXIgaGFuZGxlciBtb3ZlbWVudCAqL1xyXG4gIC8qRXhlY3V0ZSBvbiBldmVudHM6XHJcbiAgKiBvbi1tb3VzZW1vdmVcclxuICAqIG9uLXBhbm1vdmVcclxuICAqL1xyXG4gIHB1YmxpYyBoYW5kbGVyU2xpZGluZyhldmVudDogYW55KSB7XHJcbiAgICBpZiAoKHRoaXMuaXNNb3VzZUV2ZW50U3RhcnQgJiYgZXZlbnQuY2xpZW50WCkgfHwgKHRoaXMuaXNUb3VjaEV2ZW50U3RhcnQgJiYgZXZlbnQuZGVsdGFYKSkge1xyXG4gICAgICBjb25zdCBtb3ZlZFggPSBNYXRoLnJvdW5kKCgoZXZlbnQuY2xpZW50WCB8fCBldmVudC5kZWx0YVgpIC0gdGhpcy5zdGFydENsaWVudFgpIC8gdGhpcy5zbGlkZXJXaWR0aCAqIHRoaXMudG90YWxEaWZmKTtcclxuICAgICAgY29uc3QgbmV4dFBMZWZ0ID0gdGhpcy5zdGFydFBsZWZ0ICsgbW92ZWRYO1xyXG4gICAgICBjb25zdCBuZXh0UFJpZ2h0ID0gdGhpcy5zdGFydFBSaWdodCAtIG1vdmVkWDtcclxuICAgICAgaWYgKG5leHRQTGVmdCA+PSAwICYmIG5leHRQUmlnaHQgPj0gMCkge1xyXG4gICAgICAgIHRoaXMuc2V0TW9kZWxWYWx1ZSh0aGlzLmN1cnJlbnRIYW5kbGVySW5kZXgsIG5leHRQTGVmdCk7XHJcbiAgICAgICAgdGhpcy5zZXRNb2RlbFZhbHVlKHRoaXMuY3VycmVudEhhbmRsZXJJbmRleCArIDEsIG5leHRQUmlnaHQpO1xyXG4gICAgICAgIHRoaXMuc2V0SGFuZGxlclBvc2l0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgTnBuU2xpZGVyQ29tcG9uZW50IH0gZnJvbSAnLi9ucG4tc2xpZGVyLmNvbXBvbmVudCc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtcclxuICAgIENvbW1vbk1vZHVsZVxyXG4gIF0sXHJcbiAgZGVjbGFyYXRpb25zOiBbTnBuU2xpZGVyQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbTnBuU2xpZGVyQ29tcG9uZW50XVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTnBuU2xpZGVyTW9kdWxlIHsgfVxyXG4iXSwibmFtZXMiOlsidHNsaWJfMS5fX2V4dGVuZHMiLCJFdmVudEVtaXR0ZXIiLCJDb21wb25lbnQiLCJFbGVtZW50UmVmIiwiSW5wdXQiLCJPdXRwdXQiLCJIb3N0TGlzdGVuZXIiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0lBQUE7Ozs7Ozs7Ozs7Ozs7O0lBY0E7SUFFQSxJQUFJLGFBQWEsR0FBRyxVQUFTLENBQUMsRUFBRSxDQUFDO1FBQzdCLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYzthQUNoQyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsWUFBWSxLQUFLLElBQUksVUFBVSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUM1RSxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO2dCQUFFLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7b0JBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDL0UsT0FBTyxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQztBQUVGLHVCQUEwQixDQUFDLEVBQUUsQ0FBQztRQUMxQixhQUFhLENBQUMsQ0FBQyxF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