!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("npn-slider",["exports","@angular/core","@angular/common"],t):t(e["npn-slider"]={},e.ng.core,e.ng.common)}(this,function(e,n,t){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var i=function(){function e(){}return e.prototype.isNumberArray=function(e){return!(!e||!e.length||e.filter(function(e){return!isNaN(e)}).length!==e.length)},e.prototype.isNullOrEmpty=function(e){return e===undefined||null===e||""===e},e.prototype.toBoolean=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return""===e||"true"===e||-1!==t.indexOf(e)},e.prototype.findNextValidStepValue=function(e,t){for(var i=[],n=[],s=Math.sqrt(e),l=-1,a=0;a<s;a++)e%a==0&&(e/a===a?i.push(a):(i.push(a),n.push(e/a)));for(a=0;a<n.length;a++)if(t>n[a]){l=n[a];break}if(-1===l)for(a=i.length-1;0<=a;a--)if(t>i[a]){l=i[a];break}return-1===l?1:l},e}(),l={left:0,right:1};l[l.left]="left",l[l.right]="right";var a=function(i){function e(e){var t=i.call(this)||this;return t.el=e,t.sliderModel=[0,0,0],t.step=1,t.sliderWidth=0,t.totalDiff=0,t.startClientX=0,t.startPleft=0,t.startPRight=0,t.sliderInitiated=!1,t.initValues=[],t.currentValues=[0,0],t.handlerX=[0,0],t.isHandlerActive=!1,t.isTouchEventStart=!1,t.isMouseEventStart=!1,t.currentHandlerIndex=0,t.stepIndicatorPositions=[],t.isDisabled=!1,t.hideTooltip=!1,t.hideValues=!1,t.handlerIndex=l,t.showStepIndicator=!1,t.multiRange=!0,t.onChange=new n.EventEmitter,t}return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(e,i),Object.defineProperty(e.prototype,"setMinValues",{set:function(e){isNaN(e)||(this.minValue=Number(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMaxValues",{set:function(e){isNaN(e)||(this.maxValue=Number(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMinSelectedValues",{set:function(e){isNaN(e)||this.minSelected===Number(e)||(this.minSelected=Number(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMaxSelectedValues",{set:function(e){isNaN(e)||this.maxSelected===Number(e)||(this.maxSelected=Number(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepValue",{set:function(e){isNaN(e)||(this.step=Number(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setHideTooltip",{set:function(e){this.hideTooltip=this.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setHideValues",{set:function(e){this.hideValues=this.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setDisabled",{set:function(e){this.isDisabled=this.toBoolean(e,"disabled")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.initializeSlider()},e.prototype.ngOnChanges=function(e){if(this.sliderInitiated){if(!this.isNullOrEmpty(e.setMinSelectedValues)&&e.setMinSelectedValues.previousValue===e.setMinSelectedValues.currentValue)return;if(!this.isNullOrEmpty(e.setMaxSelectedValues)&&e.setMaxSelectedValues.previousValue===e.setMaxSelectedValues.currentValue)return;this.resetModel()}},e.prototype.initializeSlider=function(){try{this.sliderWidth=this.el.nativeElement.children[0].children[0].offsetWidth,this.resetModel(),this.sliderInitiated=!0}catch(e){console.error(e)}},e.prototype.resetModel=function(){if(this.validateSliderValues(),this.sliderModel=[this.currentValues[0]-this.initValues[0],this.currentValues[1]-this.currentValues[0],this.initValues[1]-this.currentValues[1]],this.totalDiff=this.sliderModel.reduce(function(e,t){return e+t},0),this.totalDiff%this.step!=0){var e=this.findNextValidStepValue(this.totalDiff,this.step);console.warn('Invalid step value "'+this.step+'" : and took "'+e+'" as default step'),this.step=e}this.initializeStepIndicator(),this.setHandlerPosition()},e.prototype.validateSliderValues=function(){this.isNullOrEmpty(this.minValue)||this.isNullOrEmpty(this.maxValue)?(this.updateInitValues([0,0]),this.updateCurrentValue([0,0],!0)):this.minValue>this.maxValue?(this.updateInitValues([0,0]),this.updateCurrentValue([0,0],!0)):(this.initValues=[this.minValue,this.maxValue],this.minSelected=this.isNullOrEmpty(this.minSelected)?0:this.minSelected,this.maxSelected=this.isNullOrEmpty(this.maxSelected)?0:this.maxSelected,(this.minSelected<this.minValue||this.minSelected>this.maxValue)&&(this.minSelected=this.minValue),(this.maxSelected<this.minValue||this.maxSelected>this.maxValue)&&(this.maxSelected=this.maxValue),this.minSelected>this.maxSelected&&(this.minSelected=this.minValue,this.maxSelected=this.maxValue),this.updateCurrentValue([this.minSelected,this.maxSelected],!0))},e.prototype.initializeStepIndicator=function(){if(this.showStepIndicator){this.stepIndicatorPositions.length=0;var e=this.totalDiff/this.step;if(10<=this.sliderWidth/e)for(var t=this.sliderWidth/e,i=t;this.stepIndicatorPositions.length<e-1;)this.stepIndicatorPositions.push(+i.toFixed(2)),i+=t;else console.warn("As 'step' value is too small compared to min & max value difference and slider width,\n          Step Indicator can't be displayed!. Provide slight large value for 'step'")}else this.stepIndicatorPositions.length=0},e.prototype.updateCurrentValue=function(e,t){void 0===t&&(t=!1),this.minSelected=this.currentValues[0]=e[0],this.maxSelected=this.currentValues[1]=e[1],t||this.onChange.emit(this.multiRange?this.currentValues:[this.currentValues[0]])},e.prototype.updateInitValues=function(e){this.minValue=this.initValues[0]=e[0],this.maxValue=this.initValues[1]=e[1]},e.prototype.setHandlerPosition=function(){var e=0;this.updateCurrentValue([this.initValues[0]+this.sliderModel[0],this.initValues[1]-this.sliderModel[2]]);for(var t=0,i=this.sliderModel.length-1;t<i;t++)e+=this.sliderModel[t],this.handlerX[t]=e/this.totalDiff*100},e.prototype.setModelValue=function(e,t){1<this.step&&(t=Math.round(t/this.step)*this.step),this.sliderModel[e]=t},e.prototype.setHandlerActiveOff=function(){this.isMouseEventStart=!1,this.isTouchEventStart=!1,this.isHandlerActive=!1},e.prototype.setHandlerActive=function(e,t){e.preventDefault(),this.isDisabled||(this.isNullOrEmpty(e.clientX)?this.isNullOrEmpty(e.deltaX)||(this.startClientX=e.deltaX,this.isTouchEventStart=!0,this.isMouseEventStart=!1):(this.startClientX=e.clientX,this.isMouseEventStart=!0,this.isTouchEventStart=!1),(this.isMouseEventStart||this.isTouchEventStart)&&(this.currentHandlerIndex=t,this.startPleft=this.sliderModel[t],this.startPRight=this.sliderModel[t+1],this.isHandlerActive=!0))},e.prototype.handlerSliding=function(e){if(this.isMouseEventStart&&e.clientX||this.isTouchEventStart&&e.deltaX){var t=Math.round(((e.clientX||e.deltaX)-this.startClientX)/this.sliderWidth*this.totalDiff),i=this.startPleft+t,n=this.startPRight-t;0<=i&&0<=n&&(this.setModelValue(this.currentHandlerIndex,i),this.setModelValue(this.currentHandlerIndex+1,n),this.setHandlerPosition())}},e.decorators=[{type:n.Component,args:[{selector:"npn-slider",template:'\x3c!--npn-slider template--\x3e\n<div class="slider" [class.disabled]="isDisabled">\n  <div class="bar" (mousemove)="handlerSliding($event)" (panmove)="handlerSliding($event)">\n    <span class="left-handle" [ngClass]="{\'active\': isHandlerActive && currentHandlerIndex === handlerIndex.left,\n                      \'last-active\': currentHandlerIndex === handlerIndex.left\n                    }"\n      [style.left.%]="handlerX[handlerIndex.left]" (mousedown)="setHandlerActive($event, handlerIndex.left)" (panstart)="setHandlerActive($event, handlerIndex.left)">\n      <span *ngIf="!hideTooltip" class="handle-tooltip">{{currentValues[handlerIndex.left]}}</span>\n    </span>\n    <div class="filler">\n      <div class="step-indicators">\n        <span *ngFor="let stepPos of stepIndicatorPositions" [style.left.px]="stepPos"></span>\n      </div>\n      <span *ngIf="multiRange" [style.left.%]="handlerX[0]" [style.width.%]="handlerX[handlerIndex.right] - handlerX[handlerIndex.left]"></span>\n      <span *ngIf="!multiRange" [style.left.%]="0" [style.width.%]="handlerX[0]"></span>\n    </div>\n    <span *ngIf="multiRange" class="right-handle" [ngClass]="{\'active\': isHandlerActive && currentHandlerIndex === handlerIndex.right,\n                      \'last-active\': currentHandlerIndex === handlerIndex.right\n                    }"\n      [style.left.%]="handlerX[handlerIndex.right]" (mousedown)="setHandlerActive($event, handlerIndex.right)"\n      (panstart)="setHandlerActive($event, handlerIndex.right)">\n      <span *ngIf="!hideTooltip" class="handle-tooltip">{{currentValues[handlerIndex.right]}}</span>\n    </span>\n  </div>\n  <div class="values" *ngIf="!hideValues">\n    <span>{{initValues[handlerIndex.left]}}</span>\n    <span>{{initValues[handlerIndex.right]}}</span>\n  </div>\n</div>\n',styles:['.slider,.slider *{box-sizing:border-box}.slider{display:block;width:100%;height:30px;padding:4px 10px;cursor:default;font-size:12px}.slider .bar{width:100%;background:#e8e8e8;height:10px;position:relative;border-radius:5px;box-shadow:inset 1px 1px 5px #bababa}.slider .bar>span.left-handle,.slider .bar>span.right-handle{display:inline-block;width:22px;height:22px;background:#bedcb2;border:7px solid #71b357;border-radius:50%;position:absolute;top:-7px;margin-left:-10px;z-index:1;cursor:pointer;transition:left .2s ease}.slider .bar>span.left-handle.last-active,.slider .bar>span.right-handle.last-active{z-index:2}.slider .bar>span.left-handle .handle-tooltip,.slider .bar>span.right-handle .handle-tooltip{display:block;position:absolute;top:-34px;left:-14px;border:1px solid #8fc37a;border-radius:4px;padding:1px 4px;min-width:20px;text-align:center;background:#d9ebd2;color:#71b357;font-weight:700;transition:opacity .2s ease;opacity:0}.slider .bar>span.left-handle .handle-tooltip:before,.slider .bar>span.right-handle .handle-tooltip:before{content:"";border:5px solid transparent;border-top-color:#8fc37a;position:absolute;top:104%;left:33%}.slider .bar>span.left-handle .handle-tooltip:after,.slider .bar>span.right-handle .handle-tooltip:after{content:"";border:5px solid transparent;border-top-color:#d9ebd2;position:absolute;top:100%;left:33%}.slider .bar>span.left-handle.active>.handle-tooltip,.slider .bar>span.left-handle:hover>.handle-tooltip,.slider .bar>span.right-handle.active>.handle-tooltip,.slider .bar>span.right-handle:hover>.handle-tooltip{opacity:1}.slider .bar div.filler{display:block;width:100%;height:100%;position:relative;overflow:hidden;border-radius:5px;border:1px solid #bedcb2}.slider .bar div.filler>span{display:inline-block;height:100%;position:absolute;top:0;background:#bedcb2;transition:all .2s ease}.slider .bar div.filler>div.step-indicators{width:100%;height:100%;position:relative}.slider .bar div.filler>div.step-indicators>span{width:1px;display:inline-block;height:10px;background:#71b357;position:absolute;left:0}.slider .values{display:block;font-weight:700;margin-top:4px;width:102%;margin-left:-1%;color:#908f90}.slider .values span:first-child{float:left}.slider .values span:last-child{float:right}.slider.disabled{opacity:.4}.slider.disabled .bar{box-shadow:none!important}.slider.disabled .bar>span.left-handle,.slider.disabled .bar>span.right-handle{cursor:not-allowed}.slider.disabled .bar>span.left-handle .handle-tooltip,.slider.disabled .bar>span.right-handle .handle-tooltip{display:none}']}]}],e.ctorParameters=function(){return[{type:n.ElementRef}]},e.propDecorators={setMinValues:[{type:n.Input,args:["min"]}],setMaxValues:[{type:n.Input,args:["max"]}],setMinSelectedValues:[{type:n.Input,args:["minSelected"]}],setMaxSelectedValues:[{type:n.Input,args:["maxSelected"]}],stepValue:[{type:n.Input,args:["step"]}],showStepIndicator:[{type:n.Input}],multiRange:[{type:n.Input}],setHideTooltip:[{type:n.Input,args:["hide-tooltip"]}],setHideValues:[{type:n.Input,args:["hide-values"]}],setDisabled:[{type:n.Input,args:["disabled"]}],onChange:[{type:n.Output}],setHandlerActiveOff:[{type:n.HostListener,args:["document:mouseup"]},{type:n.HostListener,args:["document:panend"]}]},e}(i),r=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[a],exports:[a]}]}],e}();e.NpnSliderComponent=a,e.NpnSliderModule=r,e.ɵa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=npn-slider.umd.min.js.map